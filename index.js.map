{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n\tform: document.querySelector('.form'),\n\tgalleryContainer: document.querySelector('.gallery'),\n\tloaderEl : document.querySelector('.loader'),\n\tbtnSee : document.querySelector('.btn--see'),\n}\n\nexport function createItem(array) {\n\treturn array.map(ar => `\n\t  <li class=\"gallery-item\">\n\t    <a class=\"gallery-link\" href=\"${ar.largeImageURL}\">\n\t\t<img \n\t\t  class=\"gallery-image\" \n\t\t  src=\"${ar.webformatURL}\" \n\t\t  alt=\"${ar.tags}\" \n\t\t/>\n\t    </a>\n\t    <ul class=\"info__list\"> \n\t      <li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Likes</p>\n\t\t <p class=\"info__textValue\">${ar.likes}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Views</p>\n\t\t <p class=\"info__textValue\">${ar.views}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Comments</p>\n\t\t <p class=\"info__textValue\">${ar.comments}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Downloads</p>\n\t\t <p class=\"info__textValue\">${ar.downloads}</p>\n\t\t</li>\n\t    </ul>\n\t  </li>`).join('');\n    }\n\nexport function loader(el){\n\treturn el.classList.toggle('visually-hidden');\n}\n\nexport function scroll() {\n    const firstImage = document.querySelector('.gallery-item');\n\n    if (firstImage) {\n        \n        const imageHeight = firstImage.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: imageHeight * 2,\n            left: 0,\n            behavior: \"smooth\",\n        });\n    }\n}","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY_API = '?key=45475608-942d333351883cc9805f20e6b';\nconst OTHER_SETTINGS = '&image_type=photo&orientation=horizontal&safesearch=true';\nconst PRE_PAGE = '&per_page=15';\n\nexport class PixabayApi {\n    constructor() {\n        this._findValue = '';\n        this._page = 1;\n        this.length = 0;\n    }\n\n   async fetchImade() {\n    try {\n     const response = await axios.get(`${BASE_URL}${KEY_API}&q=${this._findValue}${OTHER_SETTINGS}${PRE_PAGE}&page=${this._page}`)\n        this.incrementPage();\n        this.incrementLength(response.data.hits.length);\n        return response;\n        \n    } catch (error) {\n        console.log(error);\n    }\n\n    }\n\n    incrementPage() {\n        this._page += 1;\n    }\n\n    resetPage() {\n        this._page = 1;\n    }\n\n    incrementLength(value) {\n        this.length += value;\n    }\n\n    resetLength() {\n        this.length = 0;\n    }\n\n    get findValue() {\n        return this._findValue;\n    }\n\n    set findValue(newValue) {\n        this._findValue = newValue;\n        this.resetPage();\n        this.resetLength();\n    }\n}","import './css/main.scss';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { refs, createItem, loader, scroll} from './js/render-functions';\nimport { PixabayApi, } from './js/pixabay-api';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n\tnavText:  ['<','>'],\n\tcaptionsData: 'alt',\n\tcaptionDelay: 250,\n\tenableKeyboard: true,\n\t});\n\nconst pixabayApi = new PixabayApi();\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.btnSee.addEventListener('click', onLoadeMore);\n\nasync function onSearch(e) {\n\te.preventDefault();\n  \n\trefs.galleryContainer.innerHTML = '';\n\tloader(refs.loaderEl);\n\n\t\t\n\tif ( e.currentTarget.elements.find.value.trim() === '') {\n\t\tiziToast.warning({\n\t\t\tmessage: \"You are trying to find an empty string.\",\n\t\t\tposition: 'topRight',\n\t\t});\n\t\tloader(refs.loaderEl);\n\t\trefs.btnSee.classList.add('visually-hidden');\n\t\treturn;\n\t}\n\t  \n\tpixabayApi.findValue = e.currentTarget.elements.find.value;\n  \n\ttry {\n\t    const response = await pixabayApi.fetchImade();\n\t    loader(refs.loaderEl);\n\t    refs.galleryContainer.insertAdjacentHTML('beforeend', createItem(response.data.hits));\n\t    scroll();\n\t\t\n\t    if (refs.galleryContainer.children.length === 15 ) {\n\t\t  refs.btnSee.classList.remove('visually-hidden');\n\t    }\n\t\t \n\t    if (response.data.hits.length === 0) {\n\t\t  refs.btnSee.classList.add('visually-hidden');\n  \n\t\t  iziToast.error({\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t\t  return;\n\t\t}\n\n\t    lightbox.refresh();\n\t    refs.form.reset();\n\t} catch  {\n\t    \t\tiziToast.error({\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t}\n  }\n  \nasync function onLoadeMore() {\n\ttry {\n\t    const response = await pixabayApi.fetchImade();\n\t\n\t    if(pixabayApi.length >= response.data.totalHits){\n\t\trefs.btnSee.classList.add('visually-hidden');\n\n\t\tiziToast.info({\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t    }\n\t    \n\t    refs.galleryContainer.insertAdjacentHTML('beforeend', createItem(response.data.hits));\n\t    scroll();\n\t    lightbox.refresh();\n\t} catch {\n\t\t\tiziToast.info({\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t}\n  }\n"],"names":["refs","createItem","array","ar","loader","el","scroll","firstImage","imageHeight","BASE_URL","KEY_API","OTHER_SETTINGS","PRE_PAGE","PixabayApi","response","axios","error","value","newValue","lightbox","SimpleLightbox","pixabayApi","onSearch","onLoadeMore","e","iziToast"],"mappings":"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"}