{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n\tform: document.querySelector('.form'),\n\tgalleryContainer: document.querySelector('.gallery'),\n\tloaderEl : document.querySelector('.loader'),\n\tbtnSee : document.querySelector('.btn--see'),\n}\n\nexport function createItem(array) {\n\treturn array.map(ar => `\n\t  <li class=\"gallery-item\">\n\t    <a class=\"gallery-link\" href=\"${ar.largeImageURL}\">\n\t\t<img \n\t\t  class=\"gallery-image\" \n\t\t  src=\"${ar.webformatURL}\" \n\t\t  alt=\"${ar.tags}\" \n\t\t/>\n\t    </a>\n\t    <ul class=\"info__list\"> \n\t      <li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Likes</p>\n\t\t <p class=\"info__textValue\">${ar.likes}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Views</p>\n\t\t <p class=\"info__textValue\">${ar.views}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Comments</p>\n\t\t <p class=\"info__textValue\">${ar.comments}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Downloads</p>\n\t\t <p class=\"info__textValue\">${ar.downloads}</p>\n\t\t</li>\n\t    </ul>\n\t  </li>`).join('');\n    }\n\nexport function loader(el){\n\treturn el.classList.toggle('visually-hidden');\n}","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY_API = '?key=45475608-942d333351883cc9805f20e6b';\nconst OTHER_SETTINGS = '&image_type=photo&orientation=horizontal&safesearch=true';\nconst PRE_PAGE = '&per_page=15';\n\nexport class PixabayApi {\n    constructor() {\n        this._findValue = '';\n        this._page = 1;\n    }\n\n    fetchImade() {\n        return fetch(`${BASE_URL}${KEY_API}&q=${this._findValue}${OTHER_SETTINGS}${PRE_PAGE}&page=${this._page}`) // Додаємо параметр сторінки\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(response.status);\n                }\n                return response.json();\n            })\n            .then(data => {\n                this.incrementPage();\n                return data.hits;\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    }\n\n    incrementPage() {\n        this._page += 1;\n    }\n\n    resetPage() {\n        this._page = 1;\n    }\n\n    get findValue() {\n        return this._findValue;\n    }\n\n    set findValue(newValue) {\n        this._findValue = newValue;\n        this.resetPage();\n    }\n}","import './css/main.scss';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport axios from 'axios';\nimport { refs, createItem, loader } from './js/render-functions';\nimport { PixabayApi, } from './js/pixabay-api';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n\tnavText:  ['<','>'],\n\tcaptionsData: 'alt',\n\tcaptionDelay: 250,\n\tenableKeyboard: true,\n\t});\n\nconst pixabayApi = new PixabayApi();\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.btnSee.addEventListener('click', onLoadeMore);\n\nfunction onSearch(e){\n\te.preventDefault();\n\n      refs.galleryContainer.innerHTML='';\n\n\tloader(refs.loaderEl);\n      \n\tpixabayApi.findValue = e.currentTarget.elements.find.value;\n\tpixabayApi.fetchImade()\n\n\t.then(hits => {\n\n\t\tloader(refs.loaderEl);\n\n\t\trefs.galleryContainer.insertAdjacentHTML('beforeend', createItem(hits));\n\n\t\tif (refs.galleryContainer.children.length > 0) {\n\t\t\trefs.btnSee.classList.remove('visually-hidden');\n\t\t}\n\n\t\tlightbox.refresh();\n\t\trefs.form.reset();\n           \n\t\tif (hits.length === 0 || pixabayApi.findValue === '') {\n\t\t\trefs.btnSee.classList.add('visually-hidden');\n\n\t\t\tiziToast.error({\n\t\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\tposition: 'topRight',\n\t\t\t  });\n\t\t\t  return;\n\t\t}\n\t  })\n\t.catch(err => {\n            console.log(err);\n        });\n\t\n}\n\nfunction onLoadeMore() {\n\tpixabayApi.fetchImade()\n\t    .then(hits => {\n\t\t  refs.galleryContainer.insertAdjacentHTML('beforeend', createItem(hits));\n\t\t  lightbox.refresh();\n\n\t    })\n\t    .catch(err => {\n\t\t  console.log(err);\n\t    });\n  }\n\n"],"names":["refs","createItem","array","ar","loader","el","BASE_URL","KEY_API","OTHER_SETTINGS","PRE_PAGE","PixabayApi","response","data","err","newValue","lightbox","SimpleLightbox","pixabayApi","onSearch","onLoadeMore","e","hits","iziToast"],"mappings":"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"}