{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n\tform: document.querySelector('.form'),\n\tgalleryContainer: document.querySelector('.gallery'),\n\tloaderEl : document.querySelector('.loader'),\n\tbtnSee : document.querySelector('.btn--see'),\n\tfirstImage: document.querySelector('.gallery-item'),\n}\n\nexport function createItem(array) {\n\treturn array.map(ar => `\n\t  <li class=\"gallery-item\">\n\t    <a class=\"gallery-link\" href=\"${ar.largeImageURL}\">\n\t\t<img \n\t\t  class=\"gallery-image\" \n\t\t  src=\"${ar.webformatURL}\" \n\t\t  alt=\"${ar.tags}\" \n\t\t/>\n\t    </a>\n\t    <ul class=\"info__list\"> \n\t      <li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Likes</p>\n\t\t <p class=\"info__textValue\">${ar.likes}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Views</p>\n\t\t <p class=\"info__textValue\">${ar.views}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Comments</p>\n\t\t <p class=\"info__textValue\">${ar.comments}</p>\n\t\t</li>\n\t\t<li class=\"info__item\"> \n\t\t <p class=\"info__textHead\">Downloads</p>\n\t\t <p class=\"info__textValue\">${ar.downloads}</p>\n\t\t</li>\n\t    </ul>\n\t  </li>`).join('');\n    }\n\nexport function loader(el){\n\treturn el.classList.toggle('visually-hidden');\n}\n\nexport function scroll() {\n\tif (refs.firstImage) {\n\t    const imageHeight = refs.firstImage.getBoundingClientRect().height;\n\t    \n\t    window.scrollBy({\n\t\t  top: imageHeight * 2,\n\t\t  left: 0,\n\t\t  behavior: \"smooth\",\n\t    });\n\t}\n  }","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY_API = '?key=45475608-942d333351883cc9805f20e6b';\nconst OTHER_SETTINGS = '&image_type=photo&orientation=horizontal&safesearch=true';\nconst PRE_PAGE = '&per_page=15';\n\nexport class PixabayApi {\n    constructor() {\n        this._findValue = '';\n        this._page = 1;\n        this.length = 0;\n    }\n\n   async fetchImade() {\n    try {\n     const response = await axios.get(`${BASE_URL}${KEY_API}&q=${this._findValue}${OTHER_SETTINGS}${PRE_PAGE}&page=${this._page}`)\n        this.incrementPage();\n        this.incrementLength(response.data.hits.length);\n        return response;\n        \n    } catch (error) {\n        console.log(error);\n    }\n\n    }\n\n    incrementPage() {\n        this._page += 1;\n    }\n\n    resetPage() {\n        this._page = 1;\n    }\n\n    incrementLength(value) {\n        this.length += value;\n    }\n\n    resetLength() {\n        this.length += 0;\n    }\n\n    get findValue() {\n        return this._findValue;\n    }\n\n    set findValue(newValue) {\n        this._findValue = newValue;\n        this.resetPage();\n        this.resetLength();\n    }\n}","import './css/main.scss';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { refs, createItem, loader, scroll} from './js/render-functions';\nimport { PixabayApi, } from './js/pixabay-api';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n\tnavText:  ['<','>'],\n\tcaptionsData: 'alt',\n\tcaptionDelay: 250,\n\tenableKeyboard: true,\n\t});\n\nconst pixabayApi = new PixabayApi();\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.btnSee.addEventListener('click', onLoadeMore);\n\nasync function onSearch(e) {\n\te.preventDefault();\n  \n\trefs.galleryContainer.innerHTML = '';\n\tloader(refs.loaderEl);\n\t  \n\tpixabayApi.findValue = e.currentTarget.elements.find.value;\n  \n\ttry {\n\t    const response = await pixabayApi.fetchImade();\n\t    loader(refs.loaderEl);\n\t    refs.galleryContainer.insertAdjacentHTML('beforeend', createItem(response.data.hits));\n\t    setTimeout(scroll, 100);\n  \n\t    if (refs.galleryContainer.children.length > 0) {\n\t\t  refs.btnSee.classList.remove('visually-hidden');\n\t    }\n\t\t \n\t    if (response.data.hits.length === 0 || pixabayApi.findValue === '') {\n\t\t  refs.btnSee.classList.add('visually-hidden');\n  \n\t\t  iziToast.error({\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t\t  return;\n\t    }\n\n\t    lightbox.refresh();\n\t    refs.form.reset();\n\t} catch (error) {\n\t    console.log(error);\n\t}\n  }\n  \nasync function onLoadeMore() {\n\ttry {\n\t    const response = await pixabayApi.fetchImade();\n\t\n\t    if(pixabayApi.length >= response.data.totalHits){\n\t\trefs.btnSee.classList.add('visually-hidden');\n\n\t\tiziToast.info({\n\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\tposition: 'topRight',\n\t\t  });\n\t    }\n\t    \n\t    refs.galleryContainer.insertAdjacentHTML('beforeend', createItem(response.data.hits));\n\t    setTimeout(scroll, 100);\n\t    lightbox.refresh();\n\t} catch (error) {\n\t    console.log(error);\n\t}\n  }\n"],"names":["refs","createItem","array","ar","loader","el","scroll","imageHeight","BASE_URL","KEY_API","OTHER_SETTINGS","PRE_PAGE","PixabayApi","response","axios","error","value","newValue","lightbox","SimpleLightbox","pixabayApi","onSearch","onLoadeMore","e","iziToast"],"mappings":"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"}